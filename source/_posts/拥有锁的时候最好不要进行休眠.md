---
title: "拥有锁的时候最好不要进行休眠"
date: "2014-02-18 00:00:00"
updated: "2014-02-18 00:00:00"
tags:
-  错题本
-  坑
---


拥有锁的时候最好不要进行休眠

[](/notename/ "archive 20140218")

当拥有一个自旋锁，seqlock 和 RCU 锁时禁止休眠。
关闭中断时禁止休眠
原因是，当拥有这些锁的时候必须确保程序处于一个原子的上下文中。具体可见驱动 4

拥有一个信号量的时候尽量使休眠的短一些。原因很简单，你拿着一个锁不用，却去睡觉了，不是相当于占着茅坑不拉屎吗？结果导致其他等待信号量的线程也要休眠。


